type: object
description: |
  Product reservation resource

  <p class="warning">⚠️Structure has to contain reservation codes or product reservation items</p>
properties:
  product_reservation_id:
    type: string
    readOnly: true
    description: The unique id of the product reservation
    example: '81d503b99cc748b3ca189383ad'
  customer_id:
    type: string
    readOnly: false
    description: 	The unique id of the customer, owner of the product reservation
    example: '8eae20da24332e84611849f5cd'
  store_id:
    type: string
    readOnly: false
    description: The unique id of the store tied to the reservation
    example: '86e05affc7a7abefcd513ab400'
  reservation_codes:
    type: array
    items:
      type: string
    readOnly: true
    description: Ids of the reservation
    example: [10]
  external_reservation_codes:
    type: array
    items:
      $ref: '../schemas/_index.yaml#/ExternalCode'
    readOnly: false
    description: List of external id codes. Id codes can have different sources. For the list of id sources please contact your account manager.
  benefit_codes:
    type: array
    items:
      type: string
    readOnly: false
    description: List of the benefit (rewards, vouchers) codes used in a reservation. After the reservation is delivered, all benefits are applied on the customer's account
    example: [ "PTV116", "PTV120" ]
  product_reservation_source_id:
    type: string
    readOnly: false
    description: The unique id of the product reservation source
    example: 86e05affc7a7abefcd513ab400
  pickup_date:
    type: string
    readOnly: true
    description: Date of the reservation pickup in the tied store (YYYY-MM-DD)
    example: '2020-04-20'
  customers_note:
    type: string
    readOnly: false
    description: Customer’s note for the merchant
    example:
  total_price:
    type: number
    format: float
    readOnly: false
    description: Total price of reservation If currency_id, than total_price is mandatory
    example: 69
  currency_id:
    type: string
    readOnly: false
    description: Id of the currency. If total_price is set, than currency_id is mandatory
    example: 8bed991c68a470e7aaeffbf048
  product_reservation_items:
    type: array
    items:
      $ref: '../schemas/_index.yaml#/ProductReservationItem'
    readOnly: false
    description: List of the Product Reservation Items
  external_purchase_id:
    type: string
    readOnly: false
    description: The unique external id of the purchase
    example:
  utm:
    type: object
    $ref: '../schemas/_index.yaml#/UTM'
    readOnly: false
    description: UTM structure for data from email campaign
  actual_state:
    type: integer
    enum:
      - 0
      - 1
      - 2
      - 2
      - 4
      - 5
      - 6
      - 7
      - 8
    readOnly: true
    description: |
      Actual state of the product reservation.
      *Possible values: 0 - Canceled / 1 - Entered / 2 - Accepted / 3 - Ready / 4 - Delivered / 5 - In progress / 6 - Not Picked up / 7 - Ordered / 8 - Being solved /*
    example: 5
  states:
    type: array
    items:
      type: string
    readOnly: true
    description: History of the state values. States are sorted in descending order by time
    example: [ ]
  comments:
    type: array
    items:
      type: string
    readOnly: true
    description: Reservation comments. Comments are sorted in descending order by time
    example: [ "test", "test" ]
  last_change:
    type: string
    readOnly: true
    description: Date and time of the last change *(YYYY-MM-DD HH:MM:SS)*
    example: "2020-04-20 11:23:35"
  state:
    type: integer
    enum:
      - 0
      - 1
      - 2
    readOnly: true
    description: |
      State of the product reservation
      *Possible values are: 0 - deleted / 1 - active / 2 - non active*
    example: 1
required:
  - customer_id
  - store_id
  - product_reservation_source_id